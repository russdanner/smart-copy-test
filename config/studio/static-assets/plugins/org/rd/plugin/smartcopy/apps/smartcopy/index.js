const e=craftercms.libs.React,{useState:t,useEffect:r}=craftercms.libs.React,n=craftercms.libs.React&&Object.prototype.hasOwnProperty.call(craftercms.libs.React,"default")?craftercms.libs.React.default:craftercms.libs.React,{CrafterThemeProvider:a}=craftercms.components,{useSelector:o,useDispatch:l}=craftercms.libs.ReactRedux,i=craftercms.libs.MaterialUI.Table&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Table,"default")?craftercms.libs.MaterialUI.Table.default:craftercms.libs.MaterialUI.Table,c=craftercms.libs.MaterialUI.TableBody&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableBody,"default")?craftercms.libs.MaterialUI.TableBody.default:craftercms.libs.MaterialUI.TableBody,s=craftercms.libs.MaterialUI.TableContainer&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableContainer,"default")?craftercms.libs.MaterialUI.TableContainer.default:craftercms.libs.MaterialUI.TableContainer,u=craftercms.libs.MaterialUI.TableHead&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableHead,"default")?craftercms.libs.MaterialUI.TableHead.default:craftercms.libs.MaterialUI.TableHead,f=craftercms.libs.MaterialUI.TableRow&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableRow,"default")?craftercms.libs.MaterialUI.TableRow.default:craftercms.libs.MaterialUI.TableRow,d=craftercms.libs.MaterialUI.TableCell&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableCell,"default")?craftercms.libs.MaterialUI.TableCell.default:craftercms.libs.MaterialUI.TableCell,p=craftercms.libs.MaterialUI.Paper&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Paper,"default")?craftercms.libs.MaterialUI.Paper.default:craftercms.libs.MaterialUI.Paper,m=craftercms.libs.MaterialUI.Grid&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Grid,"default")?craftercms.libs.MaterialUI.Grid.default:craftercms.libs.MaterialUI.Grid,b=craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined"),y=craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined"),g=craftercms.libs.MaterialUI.MenuItem&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.MenuItem,"default")?craftercms.libs.MaterialUI.MenuItem.default:craftercms.libs.MaterialUI.MenuItem,h=craftercms.libs.MaterialUI.Popper&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Popper,"default")?craftercms.libs.MaterialUI.Popper.default:craftercms.libs.MaterialUI.Popper,v=craftercms.libs.MaterialUI.MenuList&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.MenuList,"default")?craftercms.libs.MaterialUI.MenuList.default:craftercms.libs.MaterialUI.MenuList,O=craftercms.libs.MaterialUI.Grow&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Grow,"default")?craftercms.libs.MaterialUI.Grow.default:craftercms.libs.MaterialUI.Grow,w=craftercms.libs.MaterialUI.ClickAwayListener&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.ClickAwayListener,"default")?craftercms.libs.MaterialUI.ClickAwayListener.default:craftercms.libs.MaterialUI.ClickAwayListener,x=craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined"),I=craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined"),{styled:C,useThemeProps:M,useTheme:D,alpha:E}=craftercms.libs.MaterialUI,S=craftercms.libs.MaterialUI.TextField&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TextField,"default")?craftercms.libs.MaterialUI.TextField.default:craftercms.libs.MaterialUI.TextField,P=craftercms.libs.MaterialUI.DialogActions&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogActions,"default")?craftercms.libs.MaterialUI.DialogActions.default:craftercms.libs.MaterialUI.DialogActions,T=craftercms.libs.MaterialUI.DialogContent&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogContent,"default")?craftercms.libs.MaterialUI.DialogContent.default:craftercms.libs.MaterialUI.DialogContent,j=craftercms.libs.MaterialUI.DialogTitle&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogTitle,"default")?craftercms.libs.MaterialUI.DialogTitle.default:craftercms.libs.MaterialUI.DialogTitle,U=craftercms.libs.MaterialUI.DialogContentText&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogContentText,"default")?craftercms.libs.MaterialUI.DialogContentText.default:craftercms.libs.MaterialUI.DialogContentText,k=craftercms.libs.MaterialUI.Button&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Button,"default")?craftercms.libs.MaterialUI.Button.default:craftercms.libs.MaterialUI.Button,N=craftercms.libs.ReactDOM&&Object.prototype.hasOwnProperty.call(craftercms.libs.ReactDOM,"default")?craftercms.libs.ReactDOM.default:craftercms.libs.ReactDOM,_=craftercms.libs.MaterialUI.Dialog&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Dialog,"default")?craftercms.libs.MaterialUI.Dialog.default:craftercms.libs.MaterialUI.Dialog,{get:R,post:A}=craftercms.utils.ajax,{Subject:F}=craftercms.libs.rxjs,{unstable_useEnhancedEffect:B,unstable_useId:L,useForkRef:W,useControlled:Y,ownerDocument:X}=craftercms.libs.MaterialUI,H=craftercms.libs.MaterialUI.generateUtilityClass&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.generateUtilityClass,"default")?craftercms.libs.MaterialUI.generateUtilityClass.default:craftercms.libs.MaterialUI.generateUtilityClass,G=craftercms.libs.MaterialUI.generateUtilityClasses&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.generateUtilityClasses,"default")?craftercms.libs.MaterialUI.generateUtilityClasses.default:craftercms.libs.MaterialUI.generateUtilityClasses,K=craftercms.libs.MaterialUI.Collapse&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Collapse,"default")?craftercms.libs.MaterialUI.Collapse.default:craftercms.libs.MaterialUI.Collapse,{createAction:$}=craftercms.libs.ReduxToolkit,V=craftercms.components.ToolsPanelListItemButton&&Object.prototype.hasOwnProperty.call(craftercms.components.ToolsPanelListItemButton,"default")?craftercms.components.ToolsPanelListItemButton.default:craftercms.components.ToolsPanelListItemButton,z=craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined"),q=craftercms.libs.MaterialUI.Tooltip&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Tooltip,"default")?craftercms.libs.MaterialUI.Tooltip.default:craftercms.libs.MaterialUI.Tooltip,J=craftercms.libs.MaterialUI.IconButton&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.IconButton,"default")?craftercms.libs.MaterialUI.IconButton.default:craftercms.libs.MaterialUI.IconButton,Q=o;function Z(){var e;const{path:t}=null!==(e=o((e=>e.preview.guest)))&&void 0!==e?e:{},r=Q((e=>e.content.itemsByPath));return null==r?void 0:r[t]}var ee=function(t){var r,n,a=t.sourceItem,o=a?(r=a.name,n=a.path,{name:r,path:n}):null;return e.createElement(e.Fragment,null,e.createElement(m,{container:!0,sx:{padding:"15px"}},e.createElement(s,{component:p},e.createElement(i,{sx:{minWidth:650},"aria-label":"source item table"},e.createElement(u,null,e.createElement(f,null,e.createElement(d,null,"Name"),e.createElement(d,null,"Path"))),e.createElement(c,null,o&&e.createElement(f,{key:o.name},e.createElement(d,{component:"th",scope:"row"},o.name),e.createElement(d,null,o.path)))))))},te=function(){return te=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},te.apply(this,arguments)};function re(e,t,r,n){return new(r||(r=Promise))((function(a,o){function l(e){try{c(n.next(e))}catch(e){o(e)}}function i(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))}function ne(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ae.apply(this,arguments)}function oe(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function le(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=le(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function ie(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=le(e))&&(n&&(n+=" "),n+=t);return n}var ce=Object.freeze({__proto__:null,clsx:ie,default:ie});function se(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var ue={exports:{}};function fe(){}function de(){}de.resetWarningCache=fe;function pe(e,t,r){const n={};return Object.keys(e).forEach((a=>{n[a]=e[a].reduce(((e,n)=>(n&&(e.push(t(n)),r&&r[n]&&e.push(r[n])),e)),[]).join(" ")})),n}ue.exports=function(){function e(e,t,r,n,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:de,resetWarningCache:fe};return r.PropTypes=r,r}();var me={exports:{}},be={},ye=n,ge=Symbol.for("react.element"),he=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,Oe=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,we={key:!0,ref:!0,__self:!0,__source:!0};function xe(e,t,r){var n,a={},o=null,l=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(l=t.ref),t)ve.call(t,n)&&!we.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:ge,type:e,key:o,ref:l,props:a,_owner:Oe.current}}be.Fragment=he,be.jsx=xe,be.jsxs=xe,me.exports=be;var Ie=e.createContext({});const Ce=["element"];const Me=e.createContext({});const De=()=>{};function Ee(t){const[,r]=e.useState(),{registerDescendant:n=De,unregisterDescendant:a=De,descendants:o=[],parentId:l=null}=e.useContext(Me),i=function(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}(o,(e=>e.element===t.element)),c=function(t){const r=e.useRef(null);return e.useEffect((()=>{r.current=t}),[t]),r.current}(o),s=o.some(((e,t)=>c&&c[t]&&c[t].element!==e.element));return B((()=>{if(t.element)return n(ae({},t,{index:i})),()=>{a(t.element)};r({})}),[n,a,i,s,t]),{parentId:l,index:i}}function Se(t){const{children:r,id:n}=t,[a,o]=e.useState([]),l=e.useCallback((e=>{let{element:t}=e,r=oe(e,Ce);o((e=>{let n;if(0===e.length)return[ae({},r,{element:t,index:0})];const a=function(e,t){let r=0,n=e.length-1;for(;r<=n;){const a=Math.floor((r+n)/2);if(e[a].element===t)return a;e[a].element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING?n=a-1:r=a+1}return r}(e,t);if(e[a]&&e[a].element===t)n=e;else{const o=ae({},r,{element:t,index:a});n=e.slice(),n.splice(a,0,o)}return n.forEach(((e,t)=>{e.index=t})),n}))}),[]),i=e.useCallback((e=>{o((t=>t.filter((t=>e!==t.element))))}),[]),c=e.useMemo((()=>({descendants:a,registerDescendant:l,unregisterDescendant:i,parentId:n})),[a,l,i,n]);return me.exports.jsx(Me.Provider,{value:c,children:r})}function Pe(e){return H("MuiTreeView",e)}G("MuiTreeView",["root"]);const Te=["children","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disabledItemsFocusable","disableSelection","expanded","id","multiSelect","onBlur","onFocus","onKeyDown","onNodeFocus","onNodeSelect","onNodeToggle","selected"],je=C("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0});function Ue(e,t,r){for(let n=t;n<e.length;n+=1)if(r===e[n])return n;return-1}function ke(){return!1}const Ne=[],_e=[];var Re=e.forwardRef((function(t,r){const n=M({props:t,name:"MuiTreeView"}),{children:a,className:o,defaultCollapseIcon:l,defaultEndIcon:i,defaultExpanded:c=Ne,defaultExpandIcon:s,defaultParentIcon:u,defaultSelected:f=_e,disabledItemsFocusable:d=!1,disableSelection:p=!1,expanded:m,id:b,multiSelect:y=!1,onBlur:g,onFocus:h,onKeyDown:v,onNodeFocus:O,onNodeSelect:w,onNodeToggle:x,selected:I}=n,C=oe(n,Te),E="rtl"===D().direction,S=ae({},n,{defaultExpanded:c,defaultSelected:f,disabledItemsFocusable:d,disableSelection:p,multiSelect:y}),P=(e=>{const{classes:t}=e;return pe({root:["root"]},Pe,t)})(S),T=L(b),j=e.useRef(null),U=W(j,r),[k,N]=e.useState(null),_=e.useRef({}),R=e.useRef({}),[A,F]=Y({controlled:m,default:c,name:"TreeView",state:"expanded"}),[B,H]=Y({controlled:I,default:f,name:"TreeView",state:"selected"}),G=e.useCallback((e=>!!Array.isArray(A)&&-1!==A.indexOf(e)),[A]),K=e.useCallback((e=>_.current[e]&&_.current[e].expandable),[]),$=e.useCallback((e=>Array.isArray(B)?-1!==B.indexOf(e):B===e),[B]),V=e.useCallback((e=>{let t=_.current[e];if(!t)return!1;if(t.disabled)return!0;for(;null!=t.parentId;)if(t=_.current[t.parentId],t.disabled)return!0;return!1}),[]),z=e=>Object.keys(_.current).map((e=>_.current[e])).filter((t=>t.parentId===e)).sort(((e,t)=>e.index-t.index)).map((e=>e.id)),q=e=>{let t=z(e);return d||(t=t.filter((e=>!V(e)))),t},J=e=>{if(G(e)&&q(e).length>0)return q(e)[0];let t=_.current[e];for(;null!=t;){const e=q(t.parentId),r=e[e.indexOf(t.id)+1];if(r)return r;t=_.current[t.parentId]}return null},Q=e=>{const t=_.current[e],r=q(t.parentId),n=r.indexOf(e);if(0===n)return t.parentId;let a=r[n-1];for(;G(a)&&q(a).length>0;)a=q(a).pop();return a},Z=()=>{let e=q(null).pop();for(;G(e);)e=q(e).pop();return e},ee=()=>q(null)[0],te=(e,t)=>{const[r,n]=((e,t)=>{if(e===t)return[e,t];const r=_.current[e],n=_.current[t];if(r.parentId===n.id||n.parentId===r.id)return n.parentId===r.id?[r.id,n.id]:[n.id,r.id];const a=[r.id],o=[n.id];let l=r.parentId,i=n.parentId,c=-1!==o.indexOf(l),s=-1!==a.indexOf(i),u=!0,f=!0;for(;!s&&!c;)u&&(a.push(l),c=-1!==o.indexOf(l),u=null!==l,!c&&u&&(l=_.current[l].parentId)),f&&!c&&(o.push(i),s=-1!==a.indexOf(i),f=null!==i,!s&&f&&(i=_.current[i].parentId));const d=c?l:i,p=z(d),m=a[a.indexOf(d)-1],b=o[o.indexOf(d)-1];return p.indexOf(m)<p.indexOf(b)?[e,t]:[t,e]})(e,t),a=[r];let o=r;for(;o!==n;)o=J(o),a.push(o);return a},re=(e,t)=>{t&&(N(t),O&&O(e,t))},ne=(e,t)=>re(e,J(t)),le=(e,t=k)=>{let r;r=-1!==A.indexOf(t)?A.filter((e=>e!==t)):[t].concat(A),x&&x(e,r),F(r)},ce=e.useRef(null),se=e.useRef(!1),ue=e.useRef([]),fe=(e,t,r=!1)=>!!t&&(r?((e,t)=>{let r;r=-1!==B.indexOf(t)?B.filter((e=>e!==t)):[t].concat(B),w&&w(e,r),H(r)})(e,t):((e,t)=>{const r=y?[t]:t;w&&w(e,r),H(r)})(e,t),ce.current=t,se.current=!1,ue.current=[],!0),de=(e,t,r=!1)=>{const{start:n=ce.current,end:a,current:o}=t;r?((e,t)=>{let r=B.slice();const{start:n,next:a,current:o}=t;a&&o&&(-1===ue.current.indexOf(o)&&(ue.current=[]),se.current?-1!==ue.current.indexOf(a)?(r=r.filter((e=>e===n||e!==o)),ue.current=ue.current.filter((e=>e===n||e!==o))):(r.push(a),ue.current.push(a)):(r.push(a),ue.current.push(o,a)),w&&w(e,r),H(r))})(e,{start:n,next:a,current:o}):null!=n&&null!=a&&((e,t)=>{let r=B.slice();const{start:n,end:a}=t;se.current&&(r=r.filter((e=>-1===ue.current.indexOf(e))));let o=te(n,a);o=o.filter((e=>!V(e))),ue.current=o;let l=r.concat(o);l=l.filter(((e,t)=>l.indexOf(e)===t)),w&&w(e,l),H(l)})(e,{start:n,end:a}),se.current=!0},be=e.useCallback((e=>{const{id:t,index:r,parentId:n,expandable:a,idAttribute:o,disabled:l}=e;_.current[t]={id:t,index:r,parentId:n,expandable:a,idAttribute:o,disabled:l}}),[]),ye=e.useCallback((e=>{const t=ae({},_.current);delete t[e],_.current=t,N((t=>t===e&&j.current===X(j.current).activeElement?z(null)[0]:t))}),[]),ge=e.useCallback(((e,t)=>{R.current[e]=t}),[]),he=e.useCallback((e=>{const t=ae({},R.current);delete t[e],R.current=t}),[]),ve=e=>(K(k)&&(G(k)?ne(e,k):V(k)||le(e)),!0),Oe=e=>{if(G(k)&&!V(k))return le(e,k),!0;const t=(r=k,_.current[r].parentId);var r;return!!t&&(re(e,t),!0)},we=_.current[k]?_.current[k].idAttribute:null;return me.exports.jsx(Ie.Provider,{value:{icons:{defaultCollapseIcon:l,defaultExpandIcon:s,defaultParentIcon:u,defaultEndIcon:i},focus:re,toggleExpansion:le,isExpanded:G,isExpandable:K,isFocused:e=>k===e,isSelected:$,isDisabled:V,selectNode:p?ke:fe,selectRange:p?ke:de,multiSelect:y,disabledItemsFocusable:d,mapFirstChar:ge,unMapFirstChar:he,registerNode:be,unregisterNode:ye,treeId:T},children:me.exports.jsx(Se,{children:me.exports.jsx(je,ae({role:"tree",id:T,"aria-activedescendant":we,"aria-multiselectable":y,className:ie(P.root,o),ref:U,tabIndex:0,onKeyDown:e=>{let t=!1;const r=e.key;if(e.altKey||e.currentTarget!==e.target||!k)return;const n=e.ctrlKey||e.metaKey;switch(r){case" ":p||V(k)||(y&&e.shiftKey?(de(e,{end:k}),t=!0):t=y?fe(e,k,!0):fe(e,k)),e.stopPropagation();break;case"Enter":V(k)||(K(k)?(le(e),t=!0):t=y?fe(e,k,!0):fe(e,k)),e.stopPropagation();break;case"ArrowDown":y&&e.shiftKey&&!p&&((e,t)=>{V(J(t))||de(e,{end:J(t),current:t},!0)})(e,k),ne(e,k),t=!0;break;case"ArrowUp":y&&e.shiftKey&&!p&&((e,t)=>{V(Q(t))||de(e,{end:Q(t),current:t},!0)})(e,k),((e,t)=>{re(e,Q(t))})(e,k),t=!0;break;case"ArrowRight":t=E?Oe(e):ve(e);break;case"ArrowLeft":t=E?ve(e):Oe(e);break;case"Home":y&&n&&e.shiftKey&&!p&&!V(k)&&((e,t)=>{ce.current||(ce.current=t);const r=se.current?ce.current:t;de(e,{start:r,end:ee()})})(e,k),(e=>{re(e,ee())})(e),t=!0;break;case"End":y&&n&&e.shiftKey&&!p&&!V(k)&&((e,t)=>{ce.current||(ce.current=t);const r=se.current?ce.current:t;de(e,{start:r,end:Z()})})(e,k),(e=>{re(e,Z())})(e),t=!0;break;default:"*"===r?(((e,t)=>{const r=_.current[t],n=z(r.parentId).filter((e=>K(e)&&!G(e))),a=A.concat(n);n.length>0&&(F(a),x&&x(e,a))})(e,k),t=!0):y&&n&&"a"===r.toLowerCase()&&!p?((e=>{de(e,{start:ee(),end:Z()})})(e),t=!0):!n&&!e.shiftKey&&((a=r)&&1===a.length&&a.match(/\S/))&&(((e,t,r)=>{let n,a;const o=r.toLowerCase(),l=[],i=[];Object.keys(R.current).forEach((e=>{const t=R.current[e],r=_.current[e],n=!r.parentId||G(r.parentId),a=!d&&V(e);n&&!a&&(l.push(e),i.push(t))})),n=l.indexOf(t)+1,n>=l.length&&(n=0),a=Ue(i,n,o),-1===a&&(a=Ue(i,0,o)),a>-1&&re(e,l[a])})(e,k,r),t=!0)}var a;t&&(e.preventDefault(),e.stopPropagation()),v&&v(e)},onFocus:e=>{if(e.target===e.currentTarget){const t=Array.isArray(B)?B[0]:B;re(e,t||q(null)[0])}h&&h(e)},onBlur:e=>{N(null),g&&g(e)},ownerState:S},C,{children:a}))})})}));const Ae=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"];var Fe=e.forwardRef((function(t,r){const{classes:n,className:a,displayIcon:o,expansionIcon:l,icon:i,label:c,nodeId:s,onClick:u,onMouseDown:f}=t,d=oe(t,Ae),{disabled:p,expanded:m,selected:b,focused:y,handleExpansion:g,handleSelection:h,preventSelection:v}=function(t){const{focus:r,isExpanded:n,isExpandable:a,isFocused:o,isDisabled:l,isSelected:i,multiSelect:c,selectNode:s,selectRange:u,toggleExpansion:f}=e.useContext(Ie),d=!!a&&a(t),p=!!n&&n(t),m=!!o&&o(t),b=!!l&&l(t),y=!!i&&i(t);return{disabled:b,expanded:p,selected:y,focused:m,handleExpansion:e=>{if(!b){m||r(e,t);const a=c&&(e.shiftKey||e.ctrlKey||e.metaKey);!d||a&&n(t)||f(e,t)}},handleSelection:e=>{b||(m||r(e,t),c&&(e.shiftKey||e.ctrlKey||e.metaKey)?e.shiftKey?u(e,{end:t}):s(e,t,!0):s(e,t))},preventSelection:e=>{(e.shiftKey||e.ctrlKey||e.metaKey||b)&&e.preventDefault()}}}(s),O=i||l||o;return me.exports.jsxs("div",ae({className:ie(a,n.root,m&&n.expanded,b&&n.selected,y&&n.focused,p&&n.disabled),onClick:e=>{g(e),h(e),u&&u(e)},onMouseDown:e=>{v(e),f&&f(e)},ref:r},d,{children:[me.exports.jsx("div",{className:n.iconContainer,children:O}),me.exports.jsx("div",{className:n.label,children:c})]}))}));function Be(e){return H("MuiTreeItem",e)}var Le=G("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]);const We=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],Ye=C("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Xe=C(Fe,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${Le.iconContainer}`]:t.iconContainer},t.label&&{[`& .${Le.label}`]:t.label}]})((({theme:e})=>({padding:"0 8px",width:"100%",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Le.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${Le.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Le.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:E(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:E(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:E(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Le.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:E(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${Le.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${Le.label}`]:ae({width:"100%",minWidth:0,paddingLeft:4,position:"relative"},e.typography.body1)}))),He=C(K,{name:"MuiTreeItem",slot:"Group",overridesResolver:(e,t)=>t.group})({margin:0,padding:0,marginLeft:17});var Ge=e.forwardRef((function(t,r){const n=M({props:t,name:"MuiTreeItem"}),{children:a,className:o,collapseIcon:l,ContentComponent:i=Fe,ContentProps:c,endIcon:s,expandIcon:u,disabled:f,icon:d,id:p,label:m,nodeId:b,onClick:y,onMouseDown:g,TransitionComponent:h=K,TransitionProps:v}=n,O=oe(n,We),{icons:w={},focus:x,isExpanded:I,isFocused:C,isSelected:D,isDisabled:E,multiSelect:S,disabledItemsFocusable:P,mapFirstChar:T,unMapFirstChar:j,registerNode:U,unregisterNode:k,treeId:N}=e.useContext(Ie);let _=null;null!=p?_=p:N&&b&&(_=`${N}-${b}`);const[R,A]=e.useState(null),F=e.useRef(null),B=W(A,r),L=e.useMemo((()=>({element:R,id:b})),[b,R]),{index:Y,parentId:H}=Ee(L),G=Boolean(Array.isArray(a)?a.length:a),$=!!I&&I(b),V=!!C&&C(b),z=!!D&&D(b),q=!!E&&E(b),J=ae({},n,{expanded:$,focused:V,selected:z,disabled:q}),Q=(e=>{const{classes:t}=e;return pe({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},Be,t)})(J);let Z,ee,te;return G&&(ee=$?l||w.defaultCollapseIcon:u||w.defaultExpandIcon),Z=G?w.defaultParentIcon:s||w.defaultEndIcon,e.useEffect((()=>{if(U&&k&&-1!==Y)return U({id:b,idAttribute:_,index:Y,parentId:H,expandable:G,disabled:f}),()=>{k(b)}}),[U,k,H,Y,b,G,f,_]),e.useEffect((()=>{if(T&&j&&m)return T(b,F.current.textContent.substring(0,1).toLowerCase()),()=>{j(b)}}),[T,j,b,m]),S?te=z:z&&(te=!0),me.exports.jsxs(Ye,ae({className:ie(Q.root,o),role:"treeitem","aria-expanded":G?$:null,"aria-selected":te,"aria-disabled":q||null,ref:B,id:_,tabIndex:-1},O,{ownerState:J,onFocus:function(e){e.target===e.currentTarget&&X(e.target).getElementById(N).focus({preventScroll:!0});const t=!P&&q;V||e.currentTarget!==e.target||t||x(e,b)},children:[me.exports.jsx(Xe,ae({as:i,ref:F,classes:{root:Q.content,expanded:Q.expanded,selected:Q.selected,focused:Q.focused,disabled:Q.disabled,iconContainer:Q.iconContainer,label:Q.label},label:m,nodeId:b,onClick:y,onMouseDown:g,icon:d,expansionIcon:ee,displayIcon:Z,ownerState:J},c)),a&&me.exports.jsx(Se,{id:b,children:me.exports.jsx(He,ae({as:h,unmountOnExit:!0,className:Q.group,in:$,component:"ul",role:"group"},v,{children:a}))})]}))}));function Ke(){return o((e=>e.sites.active))}function $e(){return o((e=>e.env))}var Ve=C((function(e){return n.createElement(h,te({},e))}))((function(e){var t=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:E(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function ze(e){var t=e.anchorEl,r=e.position,a=e.onMenuClose,o=e.onCreateFolder,l=e.onRenameFolder,i=e.onContextMenu,c=Boolean(t),s=r.pageX,u=r.pageY,f=function(e){"Tab"!==e.key&&"Escape"!==e.key||(e.preventDefault(),a())},d=function(e){t.current&&t.current.contains(e.target)||a()};return n.createElement("div",null,n.createElement(Ve,{anchorEl:{getBoundingClientRect:function(){return{x:s,y:u,width:0,height:0,top:u,right:s,bottom:u,left:s}}},open:c,onClose:a,onContextMenu:function(e){return i(e)},role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,r=e.placement;return n.createElement(O,te({},t,{style:{transformOrigin:"bottom-start"===r?"left top":"left bottom"}}),n.createElement(p,null,n.createElement(w,{onClickAway:d},n.createElement(v,{autoFocusItem:c,id:"composition-menu","aria-labelledby":"composition-button",onKeyDown:f},n.createElement(g,{onClick:o,disableRipple:!0},n.createElement(x,null),"Create new folder"),n.createElement(g,{onClick:l,disableRipple:!0},n.createElement(I,null),"Rename")))))})))}var qe=C(k)((function(e){return e.theme,{textTransform:"none",minWidth:"120px"}})),Je={exports:{}},Qe={},Ze=se(ce),et={},tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},tt.findInArray=function(e,t){for(var r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},tt.int=function(e){return parseInt(e,10)},tt.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},tt.isNum=function(e){return"number"==typeof e&&!isNaN(e)};var rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.browserPrefixToKey=ot,rt.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},rt.default=void 0,rt.getPrefix=at;var nt=["Moz","Webkit","O","ms"];function at(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var n=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!n)return"";if(r in n)return"";for(var a=0;a<nt.length;a++)if(ot(r,nt[a])in n)return nt[a];return""}function ot(e,t){return t?"".concat(t).concat(function(e){for(var t="",r=!0,n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}var lt=at();function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}rt.default=lt,Object.defineProperty(et,"__esModule",{value:!0}),et.addClassName=gt,et.addEvent=function(e,t,r,n){if(!e)return;var a=dt({capture:!0},n);e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},et.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&gt(e.body,"react-draggable-transparent-selection")},et.createCSSTransform=function(e,t){var r=yt(e,t,"px");return pt({},(0,st.browserPrefixToKey)("transform",st.default),r)},et.createSVGTransform=function(e,t){return yt(e,t,"")},et.getTouch=function(e,t){return e.targetTouches&&(0,ct.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,ct.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},et.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},et.getTranslation=yt,et.innerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ct.int)(r.paddingTop),t-=(0,ct.int)(r.paddingBottom)},et.innerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ct.int)(r.paddingLeft),t-=(0,ct.int)(r.paddingRight)},et.matchesSelector=bt,et.matchesSelectorAndParentsTo=function(e,t,r){var n=e;do{if(bt(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},et.offsetXYFromParent=function(e,t,r){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-n.left)/r,o=(e.clientY+t.scrollTop-n.top)/r;return{x:a,y:o}},et.outerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ct.int)(r.borderTopWidth),t+=(0,ct.int)(r.borderBottomWidth)},et.outerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ct.int)(r.borderLeftWidth),t+=(0,ct.int)(r.borderRightWidth)},et.removeClassName=ht,et.removeEvent=function(e,t,r,n){if(!e)return;var a=dt({capture:!0},n);e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},et.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&ht(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var ct=tt,st=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==it(e)&&"function"!=typeof e)return{default:e};var r=ut(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(rt);function ut(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(ut=function(e){return e?r:t})(e)}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mt="";function bt(e,t){return mt||(mt=(0,ct.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,ct.isFunction)(e[t])}))),!!(0,ct.isFunction)(e[mt])&&e[mt](t)}function yt(e,t,r){var n=e.x,a=e.y,o="translate(".concat(n).concat(r,",").concat(a).concat(r,")");if(t){var l="".concat("string"==typeof t.x?t.x:t.x+r),i="".concat("string"==typeof t.y?t.y:t.y+r);o="translate(".concat(l,", ").concat(i,")")+o}return o}function gt(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function ht(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},vt.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},vt.createCoreData=function(e,t,r){var n=e.state,a=!(0,Ot.isNum)(n.lastX),o=xt(e);return a?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:t,y:r}},vt.createDraggableData=function(e,t){var r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},vt.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];var n=e.props.bounds;n="string"==typeof n?n:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(n);var a=xt(e);if("string"==typeof n){var o,l=a.ownerDocument,i=l.defaultView;if(!((o="parent"===n?a.parentNode:l.querySelector(n))instanceof i.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');var c=o,s=i.getComputedStyle(a),u=i.getComputedStyle(c);n={left:-a.offsetLeft+(0,Ot.int)(u.paddingLeft)+(0,Ot.int)(s.marginLeft),top:-a.offsetTop+(0,Ot.int)(u.paddingTop)+(0,Ot.int)(s.marginTop),right:(0,wt.innerWidth)(c)-(0,wt.outerWidth)(a)-a.offsetLeft+(0,Ot.int)(u.paddingRight)-(0,Ot.int)(s.marginRight),bottom:(0,wt.innerHeight)(c)-(0,wt.outerHeight)(a)-a.offsetTop+(0,Ot.int)(u.paddingBottom)-(0,Ot.int)(s.marginBottom)}}(0,Ot.isNum)(n.right)&&(t=Math.min(t,n.right));(0,Ot.isNum)(n.bottom)&&(r=Math.min(r,n.bottom));(0,Ot.isNum)(n.left)&&(t=Math.max(t,n.left));(0,Ot.isNum)(n.top)&&(r=Math.max(r,n.top));return[t,r]},vt.getControlPosition=function(e,t,r){var n="number"==typeof t?(0,wt.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;var a=xt(r),o=r.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,wt.offsetXYFromParent)(n||e,o,r.props.scale)},vt.snapToGrid=function(e,t,r){var n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]};var Ot=tt,wt=et;function xt(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var It={},Ct={};function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default=function(){},Object.defineProperty(It,"__esModule",{value:!0}),It.default=void 0;var Dt=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Mt(e)&&"function"!=typeof e)return{default:e};var r=Nt(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(n),Et=kt(ue.exports),St=kt(N),Pt=et,Tt=vt,jt=tt,Ut=kt(Ct);function kt(e){return e&&e.__esModule?e:{default:e}}function Nt(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Nt=function(e){return e?r:t})(e)}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bt(e,t){return Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bt(e,t)}function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xt(e);if(t){var a=Xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Wt(this,r)}}function Wt(e,t){if(t&&("object"===Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yt(e)}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function Ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gt={start:"touchstart",move:"touchmove",stop:"touchend"},Kt={start:"mousedown",move:"mousemove",stop:"mouseup"},$t=Kt,Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bt(e,t)}(o,Dt.Component);var t,r,n,a=Lt(o);function o(){var e;At(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ht(Yt(e=a.call.apply(a,[this].concat(r))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Ht(Yt(e),"mounted",!1),Ht(Yt(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var r=e.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=r.ownerDocument;if(!(e.props.disabled||!(t.target instanceof n.defaultView.Node)||e.props.handle&&!(0,Pt.matchesSelectorAndParentsTo)(t.target,e.props.handle,r)||e.props.cancel&&(0,Pt.matchesSelectorAndParentsTo)(t.target,e.props.cancel,r))){"touchstart"===t.type&&t.preventDefault();var a=(0,Pt.getTouchIdentifier)(t);e.setState({touchIdentifier:a});var o=(0,Tt.getControlPosition)(t,a,Yt(e));if(null!=o){var l=o.x,i=o.y,c=(0,Tt.createCoreData)(Yt(e),l,i);(0,Ut.default)("DraggableCore: handleDragStart: %j",c),(0,Ut.default)("calling",e.props.onStart),!1!==e.props.onStart(t,c)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,Pt.addUserSelectStyles)(n),e.setState({dragging:!0,lastX:l,lastY:i}),(0,Pt.addEvent)(n,$t.move,e.handleDrag),(0,Pt.addEvent)(n,$t.stop,e.handleDragStop))}}})),Ht(Yt(e),"handleDrag",(function(t){var r=(0,Tt.getControlPosition)(t,e.state.touchIdentifier,Yt(e));if(null!=r){var n=r.x,a=r.y;if(Array.isArray(e.props.grid)){var o=n-e.state.lastX,l=a-e.state.lastY,i=_t((0,Tt.snapToGrid)(e.props.grid,o,l),2);if(o=i[0],l=i[1],!o&&!l)return;n=e.state.lastX+o,a=e.state.lastY+l}var c=(0,Tt.createCoreData)(Yt(e),n,a);if((0,Ut.default)("DraggableCore: handleDrag: %j",c),!1!==e.props.onDrag(t,c)&&!1!==e.mounted)e.setState({lastX:n,lastY:a});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var s=document.createEvent("MouseEvents");s.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(s)}}})),Ht(Yt(e),"handleDragStop",(function(t){if(e.state.dragging){var r=(0,Tt.getControlPosition)(t,e.state.touchIdentifier,Yt(e));if(null!=r){var n=r.x,a=r.y;if(Array.isArray(e.props.grid)){var o=n-e.state.lastX||0,l=a-e.state.lastY||0,i=_t((0,Tt.snapToGrid)(e.props.grid,o,l),2);o=i[0],l=i[1],n=e.state.lastX+o,a=e.state.lastY+l}var c=(0,Tt.createCoreData)(Yt(e),n,a);if(!1===e.props.onStop(t,c)||!1===e.mounted)return!1;var s=e.findDOMNode();s&&e.props.enableUserSelectHack&&(0,Pt.removeUserSelectStyles)(s.ownerDocument),(0,Ut.default)("DraggableCore: handleDragStop: %j",c),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),s&&((0,Ut.default)("DraggableCore: Removing handlers"),(0,Pt.removeEvent)(s.ownerDocument,$t.move,e.handleDrag),(0,Pt.removeEvent)(s.ownerDocument,$t.stop,e.handleDragStop))}}})),Ht(Yt(e),"onMouseDown",(function(t){return $t=Kt,e.handleDragStart(t)})),Ht(Yt(e),"onMouseUp",(function(t){return $t=Kt,e.handleDragStop(t)})),Ht(Yt(e),"onTouchStart",(function(t){return $t=Gt,e.handleDragStart(t)})),Ht(Yt(e),"onTouchEnd",(function(t){return $t=Gt,e.handleDragStop(t)})),e}return t=o,r=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,Pt.addEvent)(e,Gt.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,Pt.removeEvent)(t,Kt.move,this.handleDrag),(0,Pt.removeEvent)(t,Gt.move,this.handleDrag),(0,Pt.removeEvent)(t,Kt.stop,this.handleDragStop),(0,Pt.removeEvent)(t,Gt.stop,this.handleDragStop),(0,Pt.removeEvent)(e,Gt.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Pt.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current:St.default.findDOMNode(this)}},{key:"render",value:function(){return Dt.cloneElement(Dt.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}],r&&Ft(t.prototype,r),n&&Ft(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();It.default=Vt,Ht(Vt,"displayName","DraggableCore"),Ht(Vt,"propTypes",{allowAnyClick:Et.default.bool,disabled:Et.default.bool,enableUserSelectHack:Et.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Et.default.arrayOf(Et.default.number),handle:Et.default.string,cancel:Et.default.string,nodeRef:Et.default.object,onStart:Et.default.func,onDrag:Et.default.func,onStop:Et.default.func,onMouseDown:Et.default.func,scale:Et.default.number,className:jt.dontSetMe,style:jt.dontSetMe,transform:jt.dontSetMe}),Ht(Vt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=m(r);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n),a=p(ue.exports),o=p(N),l=p(Ze),i=et,c=vt,s=tt,u=p(It),f=p(Ct),d=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function y(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var a=D(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(p,e);var t,n,a,s=I(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),E(M(t=s.call(this,e)),"onDragStart",(function(e,r){if((0,f.default)("Draggable: onDragStart: %j",r),!1===t.props.onStart(e,(0,c.createDraggableData)(M(t),r)))return!1;t.setState({dragging:!0,dragged:!0})})),E(M(t),"onDrag",(function(e,r){if(!t.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",r);var n=(0,c.createDraggableData)(M(t),r),a={x:n.x,y:n.y};if(t.props.bounds){var o=a.x,l=a.y;a.x+=t.state.slackX,a.y+=t.state.slackY;var i=v((0,c.getBoundPosition)(M(t),a.x,a.y),2),s=i[0],u=i[1];a.x=s,a.y=u,a.slackX=t.state.slackX+(o-a.x),a.slackY=t.state.slackY+(l-a.y),n.x=a.x,n.y=a.y,n.deltaX=a.x-t.state.x,n.deltaY=a.y-t.state.y}if(!1===t.props.onDrag(e,n))return!1;t.setState(a)})),E(M(t),"onDragStop",(function(e,r){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(M(t),r)))return!1;(0,f.default)("Draggable: onDragStop: %j",r);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var a=t.props.position,o=a.x,l=a.y;n.x=o,n.y=l}t.setState(n)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:h({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=p,a=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.position,n=t.prevPropsPosition;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:h({},r)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var n=t.children,a=t.defaultPosition,o=t.defaultClassName,s=t.defaultClassNameDragging,f=t.defaultClassNameDragged,p=t.position,m=t.positionOffset;t.scale;var g=y(t,d),v={},O=null,w=!Boolean(p)||this.state.dragging,x=p||a,I={x:(0,c.canDragX)(this)&&w?this.state.x:x.x,y:(0,c.canDragY)(this)&&w?this.state.y:x.y};this.state.isElementSVG?O=(0,i.createSVGTransform)(I,m):v=(0,i.createCSSTransform)(I,m);var C=(0,l.default)(n.props.className||"",o,(E(e={},s,this.state.dragging),E(e,f,this.state.dragged),e));return r.createElement(u.default,b({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:C,style:h(h({},n.props.style),v),transform:O}))}}])&&w(t.prototype,n),a&&w(t,a),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.Component);e.default=S,E(S,"displayName","Draggable"),E(S,"propTypes",h(h({},u.default.propTypes),{},{axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),E(S,"defaultProps",h(h({},u.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(Qe);var zt=Qe.default,qt=Qe.DraggableCore;Je.exports=zt,Je.exports.default=zt,Je.exports.DraggableCore=qt;var Jt=C(_)((function(e){var t=e.theme;return{"& .MuiPaper-root":{width:"45%"},"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function Qt(e){return n.createElement(Je.exports,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},n.createElement(p,te({},e)))}function Zt(e){return n.createElement(Jt,te({maxWidth:"md",PaperComponent:Qt},e))}var er=function(e){return new Promise((function(t,r){R(e).subscribe({next:function(e){t(e)},error:function(e){r(e)}})}))},tr=function(e,t,r){return new Promise((function(n,a){A(e,t,r).subscribe({next:function(e){n(e)},error:function(e){a(e)}})}))},rr={getPreviewItem:function(e){return{name:e.label,path:e.path,contentType:e.contentTypeId}},getChildrenPaths:function(e,t,r){return re(this,void 0,void 0,(function(){var n,a;return ne(this,(function(o){switch(o.label){case 0:n="".concat(e).concat("/api/1/services/api/1/content/get-items-tree.json","?site=").concat(t,"&path=").concat(r,"&depth=1"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,er(n)];case 2:return 200===(a=o.sent()).status?[2,a.response.item.children.filter((function(e){return e.path!==r})).map((function(e){return e.path}))]:[2,[]];case 3:return o.sent(),[2,[]];case 4:return[2]}}))}))},copyItem:function(e,t,r,n){return re(this,void 0,void 0,(function(){var a,o,l;return ne(this,(function(i){switch(i.label){case 0:a="".concat(e).concat("/api/2/content/paste"),o={siteId:t,operation:"COPY",targetPath:n,item:{path:r}},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,tr(a,o)];case 2:return 200===(l=i.sent()).status?[2,l.response]:[2,null];case 3:return i.sent(),[2,null];case 4:return[2]}}))}))},createFolder:function(e,t,r,n){return re(this,void 0,void 0,(function(){var a,o,l;return ne(this,(function(i){switch(i.label){case 0:a="".concat(e).concat("/api/1/services/api/1/content/create-folder.json","?site=").concat(t,"&path=").concat(r,"&name=").concat(n),o="",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,tr(a,o)];case 2:return 200===(l=i.sent()).status?[2,l.response]:[2,!1];case 3:return i.sent(),[2,!1];case 4:return[2]}}))}))},renameFolder:function(e,t,r,n){return re(this,void 0,void 0,(function(){var a,o,l;return ne(this,(function(i){switch(i.label){case 0:a="".concat(e).concat("/api/1/services/api/1/content/rename-folder.json","?site=").concat(t,"&path=").concat(r,"&name=").concat(n),o="",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,tr(a,o)];case 2:return 200===(l=i.sent()).status?[2,l.response]:[2,!1];case 3:return i.sent(),[2,!1];case 4:return[2]}}))}))}};function nr(e){var r=this,a=e.open,o=e.onClose,l=e.path,i=Ke(),c=$e().authoringBase,s=t(""),u=s[0],f=s[1],d=t(!1),p=d[0],m=d[1],b=function(){f(""),o(!1)};return n.createElement("div",null,n.createElement(Zt,{open:a,onClose:b,"aria-labelledby":"draggable-dialog-title"},n.createElement(j,{style:{cursor:"move"},id:"draggable-dialog-title"},"Create a New Folder"),n.createElement(T,null,n.createElement(U,null,"Parent path: ",l,n.createElement("br",null),"Please enter a folder name."),n.createElement(S,{autoFocus:!0,margin:"dense",id:"name",label:"Folder Name",type:"text",fullWidth:!0,variant:"standard",value:u,onChange:function(e){return f(e.target.value.trim())}})),n.createElement(P,null,n.createElement(qe,{variant:"outlined",color:"primary",onClick:b},"Cancel"),n.createElement(qe,{variant:"contained",color:"primary",onClick:function(){return re(r,void 0,void 0,(function(){var e;return ne(this,(function(t){switch(t.label){case 0:return u&&l?(m(!0),[4,rr.createFolder(c,i,l,u)]):[3,2];case 1:e=t.sent(),f(""),o(e),m(!1),t.label=2;case 2:return[2]}}))}))},disabled:!u||p},"Create"))))}function ar(e){var a=this,o=e.open,l=e.onClose,i=e.path,c=Ke(),s=$e().authoringBase,u=t(""),f=u[0],d=u[1],p=t(!1),m=p[0],b=p[1];r((function(){i&&d(i.split("/").pop())}),[i]);var y=function(){l(!1)};return n.createElement(n.Fragment,null,n.createElement(Zt,{open:o,onClose:y,"aria-labelledby":"draggable-dialog-title"},n.createElement(j,{style:{cursor:"move"},id:"draggable-dialog-title"},"Rename Folder"),n.createElement(T,null,n.createElement(U,null,"Current path: ",i,n.createElement("br",null),"Please provide a new folder name."),n.createElement(S,{autoFocus:!0,margin:"dense",id:"name",label:"Folder Name",type:"text",fullWidth:!0,variant:"standard",value:f,onChange:function(e){return d(e.target.value.trim())}})),n.createElement(P,null,n.createElement(qe,{variant:"outlined",color:"primary",onClick:y},"Cancel"),n.createElement(qe,{variant:"contained",color:"primary",onClick:function(){return re(a,void 0,void 0,(function(){var e;return ne(this,(function(t){switch(t.label){case 0:return f&&i?(b(!0),[4,rr.renameFolder(s,c,i,f)]):[3,2];case 1:e=t.sent(),l(e),b(!1),t.label=2;case 2:return[2]}}))}))},disabled:!f||m},"Rename"))))}var or=new F;function lr(e){var a=this,o=e.rootDir,l=Ke(),g=$e().authoringBase,h=t({}),v=h[0],O=h[1],w=t([]),x=w[0],I=w[1],C=t(""),M=C[0],D=C[1],E=t(null),S=E[0],P=E[1],T=t({}),j=T[0],U=T[1],k=t(!1),N=k[0],_=k[1],R=t(!1),A=R[0],F=R[1],B=function(e,t){return re(a,void 0,void 0,(function(){var r,n,a;return ne(this,(function(i){switch(i.label){case 0:return e?(r=function(e,t){for(var r=e.split("/").filter((function(e){return!!e})),n=[],a="",l=o,i=0;i<r.length;i+=1)(a=0===i?"/".concat(r[i]):"".concat(a,"/").concat(r[i])).indexOf(l)>=0&&n.push(a);for(var c={},s=function(){var e=n.shift();if(t.id===e)return c=t,"continue";c=c.children.find((function(t){return t.id===e}))};n.length>0;)s();return c}(e,v),!t&&r.children.length>0?[2]:[4,rr.getChildrenPaths(g,l,e)]):[2];case 1:return n=i.sent(),a=n.map((function(e){return{id:e,name:e.split("/").pop(),children:[]}})),r.children=a,O(Object.assign({},v)),[2]}}))}))};r((function(){!function(){re(this,void 0,void 0,(function(){var e,t;return ne(this,(function(r){switch(r.label){case 0:return[4,rr.getChildrenPaths(g,l,o)];case 1:return e=r.sent(),t=e.map((function(e){return{id:e,name:e.split("/").pop(),children:[]}})),O({id:o,name:o.split("/").pop(),children:t}),[2]}}))}))}()}),[]);var L=function(e){return e.id?n.createElement(Ge,{key:e.id,nodeId:e.id,label:e.name,onContextMenu:function(t){return W(t,e.id)}},Array.isArray(e.children)&&e.children.length>0?e.children.map((function(e){return L(e)})):n.createElement(Ge,{nodeId:"empty-tree"})):n.createElement(Ge,{nodeId:"empty-tree"})},W=function(e,t){e.stopPropagation(),e.preventDefault(),D(t),P(e.currentTarget),U({pageX:e.pageX,pageY:e.pageY,path:t})};return n.createElement(n.Fragment,null,n.createElement(m,{container:!0,sx:{padding:"15px"}},n.createElement(s,{component:p,sx:{marginBottom:"15px"}},n.createElement(i,{sx:{minWidth:650},"aria-label":"destination path table"},n.createElement(u,null,n.createElement(f,null,n.createElement(d,null,"Destination Path"))),n.createElement(c,null,n.createElement(f,{key:M||"root"},n.createElement(d,{component:"th",scope:"row"},M||"Select a destination path"))))),n.createElement(Re,{defaultCollapseIcon:n.createElement(b,null),defaultExpandIcon:n.createElement(y,null),defaultExpanded:[o],expanded:x,selected:M,onNodeToggle:function(e,t){I(t)},onNodeSelect:function(e,t){return re(a,void 0,void 0,(function(){return ne(this,(function(e){return D(t),or.next(t),B(t,!1),[2]}))}))},sx:{height:"calc(90vh - 64px - 1px - 140px - 110px - 30px - 64px - 15px)",flexGrow:1,maxWidth:"100%",overflowY:"auto"}},L(v)),n.createElement(ze,{anchorEl:S,onMenuClose:function(){P(null)},position:j,onCreateFolder:function(){P(null),_(!0)},onRenameFolder:function(){P(null),F(!0)},onContextMenu:function(e){P(null),e.preventDefault()}})),n.createElement(nr,{open:N,onClose:function(e){e&&B(j.path,!0),_(!1)},path:j.path}),n.createElement(ar,{open:A,onClose:function(e){if(e){var t=j.path.split("/").slice(0,-1).join("/");B(t,!0)}F(!1)},path:j.path}))}const ir=$("SHOW_WIDGET_DIALOG"),cr=$("CLOSE_WIDGET_DIALOG"),sr=$("SHOW_SYSTEM_NOTIFICATION");function ur(e){var r=this,a=e.rootDir,o=e.sourceItem,i=l(),c=Ke(),s=$e().authoringBase,u=t(""),f=u[0],d=u[1],p=t(!1),m=p[0],b=p[1];or.subscribe((function(e){d(e)}));var y=function(e,t){return re(r,void 0,void 0,(function(){var r,n,a;return ne(this,(function(l){switch(l.label){case 0:return e.preventDefault(),!m&&f&&o&&o.path?(b(!0),r=o.path,[4,rr.copyItem(s,c,r,f)]):[2];case 1:return(n=l.sent())?(a=n.items[0],t&&a&&g(c,a),t||i(sr({message:"Selected files are copied to destination folder."})),b(!1),[2]):(b(!1),[2,i(sr({message:"There is an error while copying content: ".concat(r)}))])}}))}))},g=function(e,t){return i({type:"SHOW_EDIT_DIALOG",payload:{site:e,path:t,type:"form",authoringBase:s,isHidden:!1,onSaveSuccess:{type:"BATCH_ACTIONS",payload:[{type:"DISPATCH_DOM_EVENT",payload:{id:"editDialogSuccess"}},{type:"SHOW_EDIT_ITEM_SUCCESS_NOTIFICATION"},{type:"CLOSE_EDIT_DIALOG"}]},onCancel:{type:"BATCH_ACTIONS",payload:[{type:"CLOSE_EDIT_DIALOG"},{type:"DISPATCH_DOM_EVENT",payload:{id:"editDialogDismissed"}}]}}})},h=function(){d(""),b(!1)};return n.createElement(P,null,n.createElement(qe,{variant:"outlined",color:"primary",onClick:function(e){var t;"backdropClick"!==(t=null)&&"escapeKeyDown"!==t&&(h(),i(cr()))},disabled:m},"Close"),n.createElement(qe,{variant:"contained",color:"primary",onClick:function(e){return y(e,!1)},disabled:m||!a||!f},"Copy"),n.createElement(qe,{variant:"contained",color:"primary",onClick:function(e){y(e,!0)},disabled:m||!a||!f},"Copy and Edit"))}function fr(){var e,t=Z(),r=t?rr.getPreviewItem(t):null,o=(e=r)&&e.path&&e.path.startsWith("/site/website")?"/site/website":e&&e.path&&e.path.startsWith("/site/components")?"/site/components":null;return n.createElement(a,null,n.createElement(ee,{sourceItem:r}),n.createElement(lr,{rootDir:o}),n.createElement(ur,{rootDir:o,sourceItem:r}))}function dr(t){var r=t.title?t.title:"Smart Copy",n=t.icon&&t.icon.id?t.icon.id:"@mui/icons-material/ContentPasteOutlined",a=l();return e.createElement(V,{icon:{id:n},title:r,onClick:function(){return a(ir({title:r,extraProps:t,widget:{id:"org.rd.plugin.smartcopy.dialog"}}))}})}function pr(t){var r=t.title?t.title:"Smart Copy",n=l();return e.createElement(q,{title:r},e.createElement(J,{size:"large",onClick:function(){return n(ir({title:r,extraProps:t,widget:{id:"org.rd.plugin.smartcopy.dialog"}}))}},e.createElement(z,null)))}var mr={locales:void 0,scripts:void 0,stylesheets:void 0,id:"org.rd.plugin.smartcopy",widgets:{"org.rd.plugin.smartcopy.dialog":fr,"org.rd.plugin.smartcopy.openSmartCopyPanelButton":dr,"org.rd.plugin.smartcopy.openSmartCopyToolbarButton":pr}};export{fr as Dialog,dr as OpenSmartCopyPanelButton,pr as OpenSmartCopyToolbarButton,mr as default};
